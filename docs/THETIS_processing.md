# THETIS è³‡æ–™é›†è™•ç†æŒ‡å—

## ğŸ“‹ äº‹ä»¶æ¨™ç±¤æ˜ å°„èªªæ˜

æœ¬å°ˆæ¡ˆä½¿ç”¨ **4 å€‹é€šç”¨äº‹ä»¶é¡åˆ¥**ï¼Œä¸¦å°‡ç¶²çƒå’Œç¾½çƒçš„å…·é«”å‹•ä½œæ˜ å°„åˆ°é€™äº›é¡åˆ¥ï¼š

### æ˜ å°„é—œä¿‚

| é€šç”¨äº‹ä»¶ | ç¶²çƒå‹•ä½œ | ç¾½çƒå‹•ä½œ |
|---------|---------|---------|
| **Serve** (ç™¼çƒ) | flat_service, slice_service | ç™¼é•·çƒ, ç™¼çŸ­çƒ |
| **Smash** (æ®ºçƒ) | smash | æ®ºçƒ, é»æ‰£, æ’²çƒ |
| **Rally** (å°æ‰“) | forehand_flat, backhand | é•·çƒ, åˆ‡çƒ, æŒ‘çƒ, æ¨çƒ, æ”¾å°çƒ, å¾Œå ´æŠ½å¹³çƒ, å¹³çƒ |
| **Defense/Receive** (é˜²å®ˆ) | forehand_volley, backhand_volley | æ“‹å°çƒ, é˜²å®ˆå›æŠ½/æŒ‘, å‹¾çƒ |

**é…ç½®æª”æ¡ˆ**: [`configs/event_mapping.json`](../configs/event_mapping.json)

---

## ğŸ¾ ç¶²çƒè³‡æ–™çµæ§‹ï¼ˆTHETISï¼‰

### ç•¶å‰è³‡æ–™å¤¾åˆ†é¡

```
data/raw/tennis/
â”œâ”€â”€ flat_service/       # ç™¼çƒ - å¹³æ“Š
â”œâ”€â”€ slice_service/      # ç™¼çƒ - åˆ‡å‰Š
â”œâ”€â”€ smash/             # æ®ºçƒ
â”œâ”€â”€ forehand_flat/     # å°æ‰“ - æ­£æ‰‹å¹³æ“Š
â”œâ”€â”€ backhand/          # å°æ‰“ - åæ‰‹
â”œâ”€â”€ forehand_volley/   # é˜²å®ˆ - æ­£æ‰‹æˆªæ“Š
â””â”€â”€ backhand_volley/   # é˜²å®ˆ - åæ‰‹æˆªæ“Š
```

**ç¶²çƒå…± 7 å€‹ç´°åˆ†é¡åˆ¥** â†’ è¨“ç·´æ™‚å¯é¸æ“‡ï¼š
- **é¸é … A**: 7 é¡åˆ¥ç´°åˆ†è¨“ç·´ï¼ˆç•¶å‰é…ç½®ï¼‰
- **é¸é … B**: 4 é¡åˆ¥é€šç”¨è¨“ç·´ï¼ˆåˆä½µç‚ºé€šç”¨äº‹ä»¶ï¼‰

---

## ğŸ¸ ç¾½çƒè³‡æ–™çµæ§‹ï¼ˆæœªä¾†ï¼‰

```
data/raw/badminton/
â”œâ”€â”€ serve/              # ç™¼é•·çƒ, ç™¼çŸ­çƒ
â”œâ”€â”€ smash/             # æ®ºçƒ, é»æ‰£, æ’²çƒ
â”œâ”€â”€ rally/             # é•·çƒ, åˆ‡çƒ, æŒ‘çƒ, æ¨çƒ, æ”¾å°çƒ, å¾Œå ´æŠ½å¹³çƒ, å¹³çƒ
â””â”€â”€ defense_receive/   # æ“‹å°çƒ, é˜²å®ˆå›æŠ½/æŒ‘, å‹¾çƒ
```

**ç¾½çƒä½¿ç”¨ 4 å€‹é€šç”¨é¡åˆ¥**

---

## ğŸ“¦ THETIS è³‡æ–™é›†è™•ç†æµç¨‹

### æ­¥é©Ÿ 1: ä¸‹è¼‰ THETIS

```bash
# ä½¿ç”¨ä¸‹è¼‰è…³æœ¬
./scripts/download_thetis.sh

# é è¨­ä¸‹è¼‰åˆ° ~/Downloads/thetis_rgb/
```

### æ­¥é©Ÿ 2: äº†è§£ THETIS çµæ§‹

**THETIS è³‡æ–™é›†é€šå¸¸åŒ…å«**ï¼š
- `VIDEO_RGB/` - RGB å½±ç‰‡æª”æ¡ˆ
- `annotations/` æˆ– `labels/` - æ¨™è¨»æª”æ¡ˆï¼ˆCSV/JSONï¼‰
- `README` æˆ–æ–‡æª”èªªæ˜è³‡æ–™æ ¼å¼

**ä½ éœ€è¦**ï¼š
1. æŸ¥çœ‹æ¨™è¨»æª”æ¡ˆäº†è§£æ¯å€‹å½±ç‰‡å°æ‡‰çš„å‹•ä½œé¡å‹
2. ç¢ºèª THETIS çš„å‹•ä½œåˆ†é¡èˆ‡æˆ‘å€‘çš„æ˜ å°„é—œä¿‚

### æ­¥é©Ÿ 3: ä½¿ç”¨æ•´ç†å·¥å…·æª¢æŸ¥

```bash
# é è¦½ THETIS è³‡æ–™çµæ§‹ï¼ˆä¸å¯¦éš›è¤‡è£½ï¼‰
python3 scripts/organize_thetis.py \
    --thetis_dir ~/Downloads/thetis_rgb \
    --output_dir data/raw/tennis
```

**è¼¸å‡ºæœƒé¡¯ç¤º**ï¼š
- THETIS å½±ç‰‡æª”æ¡ˆåˆ—è¡¨
- éœ€è¦å»ºç«‹çš„é¡åˆ¥è³‡æ–™å¤¾
- æ‰‹å‹•æ•´ç†çš„æ­¥é©Ÿèªªæ˜

### æ­¥é©Ÿ 4: æ‰‹å‹•æ•´ç†å½±ç‰‡

æ ¹æ“š THETIS çš„æ¨™è¨»æª”æ¡ˆï¼Œå°‡å½±ç‰‡è¤‡è£½åˆ°å°æ‡‰é¡åˆ¥ï¼š

#### æ–¹å¼ A: æ‰‹å‹•è¤‡è£½ï¼ˆå°é‡è³‡æ–™ï¼‰

```bash
# ç¯„ä¾‹ï¼šè¤‡è£½ç™¼çƒå½±ç‰‡
cp ~/Downloads/thetis_rgb/VIDEO_RGB/serve_001.mp4 \
   data/raw/tennis/flat_service/

# è¤‡è£½æ®ºçƒå½±ç‰‡
cp ~/Downloads/thetis_rgb/VIDEO_RGB/smash_*.mp4 \
   data/raw/tennis/smash/
```

#### æ–¹å¼ B: ç·¨å¯«è…³æœ¬è‡ªå‹•åŒ–ï¼ˆå¤§é‡è³‡æ–™ï¼‰

å‰µå»ºä¸€å€‹ç°¡å–®çš„ Python è…³æœ¬è®€å– THETIS æ¨™è¨»æª”æ¡ˆï¼š

```python
import pandas as pd
import shutil
from pathlib import Path

# è®€å– THETIS æ¨™è¨»æª”ï¼ˆæ ¼å¼éœ€æ ¹æ“šå¯¦éš›èª¿æ•´ï¼‰
annotations = pd.read_csv('~/Downloads/thetis_rgb/annotations.csv')

# æ˜ å°„ THETIS é¡åˆ¥åˆ°æˆ‘å€‘çš„é¡åˆ¥
thetis_to_our_mapping = {
    'serve': 'flat_service',  # æ ¹æ“šå¯¦éš›èª¿æ•´
    'smash': 'smash',
    # ... æ›´å¤šæ˜ å°„
}

# è¤‡è£½æª”æ¡ˆ
for _, row in annotations.iterrows():
    video_name = row['video_name']
    thetis_label = row['label']
    our_label = thetis_to_our_mapping.get(thetis_label)
    
    if our_label:
        src = Path(f'~/Downloads/thetis_rgb/VIDEO_RGB/{video_name}')
        dst = Path(f'data/raw/tennis/{our_label}/{video_name}')
        shutil.copy(src, dst)
```

### æ­¥é©Ÿ 5: é©—è­‰æ•´ç†çµæœ

```bash
# æª¢æŸ¥æ¯å€‹é¡åˆ¥çš„å½±ç‰‡æ•¸é‡
for dir in data/raw/tennis/*/; do
    echo "$dir: $(ls -1 "$dir" | wc -l) videos"
done
```

**ç†æƒ³çµæœ**ï¼š
```
data/raw/tennis/flat_service/: 15 videos
data/raw/tennis/slice_service/: 12 videos
data/raw/tennis/smash/: 20 videos
...
```

### æ­¥é©Ÿ 6: é‹è¡Œé è™•ç†

```bash
python3 src/data/preprocess_videos.py \
    --raw_dir data/raw/tennis \
    --output_dir data/processed/tennis \
    --split_ratio 0.7 0.15 0.15
```

---

## ğŸ”„ é·ç§»å­¸ç¿’ç­–ç•¥

### ç¶²çƒ â†’ ç¾½çƒé¡åˆ¥æ˜ å°„

ç•¶ä½ è¨“ç·´å®Œç¶²çƒæ¨¡å‹å¾Œï¼Œå¯ä»¥é¸æ“‡ï¼š

#### é¸é … 1: ç´°åˆ†é¡åˆ¥é·ç§»
- ç¶²çƒ 7 é¡ â†’ ç¾½çƒ 4 é¡
- éœ€è¦é‡æ–°æ˜ å°„è¼¸å‡ºå±¤
- åœ¨ `configs/` ä¸­è¨­å®šé¡åˆ¥æ˜ å°„

#### é¸é … 2: é€šç”¨é¡åˆ¥è¨“ç·´
- å°‡ç¶²çƒ 7 é¡åˆä½µç‚º 4 é¡é€šç”¨äº‹ä»¶è¨“ç·´
- ç›´æ¥é·ç§»åˆ°ç¾½çƒ 4 é¡
- **æ›´ç°¡å–®ï¼Œæ¨è–¦ï¼**

### å¯¦ä½œé€šç”¨é¡åˆ¥è¨“ç·´

ä¿®æ”¹è³‡æ–™å¤¾çµæ§‹æˆ–åœ¨ Dataset ä¸­åŠ å…¥æ˜ å°„é‚è¼¯ï¼š

```python
# åœ¨ dataset.py ä¸­æ·»åŠ é¡åˆ¥æ˜ å°„
event_mapping = {
    'serve': ['flat_service', 'slice_service'],
    'smash': ['smash'],
    'rally': ['forehand_flat', 'backhand'],
    'defense_receive': ['forehand_volley', 'backhand_volley']
}
```

---

## ğŸ’¡ æœ€ä½³å¯¦è¸å»ºè­°

### è³‡æ–™é‡å»ºè­°
- **æ¯å€‹ç´°åˆ†é¡åˆ¥**: 10-20 å€‹å½±ç‰‡
- **ç¸½è¨ˆï¼ˆç¶²çƒï¼‰**: 70-140 å€‹å½±ç‰‡
- **ç¾½çƒ**: å¯ä»¥æ›´å°‘ï¼Œå› ç‚ºæœ‰é·ç§»å­¸ç¿’

### è³‡æ–™å“è³ª
- âœ… æ¸…æ™°çš„æ“Šçƒå‹•ä½œ
- âœ… å®Œæ•´çš„å‹•ä½œéç¨‹ï¼ˆæº–å‚™-æ“Šçƒ-è·Ÿéš¨ï¼‰
- âœ… ç©©å®šçš„æ”å½±è§’åº¦
- âš ï¸ é¿å…å¤šå€‹å‹•ä½œæ··åœ¨åŒä¸€å½±ç‰‡

### æ¨™è¨»ä¸€è‡´æ€§
- åŒä¸€é¡åˆ¥çš„å½±ç‰‡æ‡‰è©²å‹•ä½œç‰¹å¾µç›¸ä¼¼
- ä¸ç¢ºå®šçš„å½±ç‰‡å¯ä»¥å…ˆæ”¾åˆ° `unsorted/` è³‡æ–™å¤¾
- å®šæœŸæª¢æŸ¥åˆ†é¡æ˜¯å¦åˆç†

---

## â“ å¸¸è¦‹å•é¡Œ

### Q: THETIS çš„é¡åˆ¥å’Œæˆ‘å€‘çš„ä¸åŒ¹é…æ€éº¼è¾¦ï¼Ÿ
**A**: 
1. åƒè€ƒ THETIS æ–‡æª”äº†è§£ä»–å€‘çš„åˆ†é¡æ¨™æº–
2. æ‰‹å‹•è§€çœ‹å½±ç‰‡ç¢ºèªå‹•ä½œé¡å‹
3. æ ¹æ“šå¯¦éš›å‹•ä½œç‰¹å¾µåˆ†é…åˆ°æœ€æ¥è¿‘çš„é¡åˆ¥

### Q: å½±ç‰‡å¤ªå¤šç„¡æ³•æ‰‹å‹•æ•´ç†ï¼Ÿ
**A**: 
1. å…ˆæ•´ç†å°‘é‡è³‡æ–™ï¼ˆæ¯é¡ 5-10 å€‹ï¼‰æ¸¬è©¦æµç¨‹
2. ç·¨å¯«è‡ªå‹•åŒ–è…³æœ¬ï¼ˆåƒè€ƒä¸Šé¢çš„ç¯„ä¾‹ï¼‰
3. æˆ–ä½¿ç”¨ THETIS æä¾›çš„å·¥å…·ï¼ˆå¦‚æœæœ‰ï¼‰

### Q: æŸäº›é¡åˆ¥çš„å½±ç‰‡å¾ˆå°‘æ€éº¼è¾¦ï¼Ÿ
**A**: 
- åˆä½µç›¸ä¼¼é¡åˆ¥ï¼ˆå¦‚ flat_service å’Œ slice_service â†’ serveï¼‰
- æˆ–å¾ YouTube ä¸‹è¼‰è£œå……è³‡æ–™
- ä½¿ç”¨æ›´å¼·çš„è³‡æ–™å¢å¼·

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

- **äº‹ä»¶æ˜ å°„å®šç¾©**: `configs/event_mapping.json`
- **æ•´ç†å·¥å…·**: `scripts/organize_thetis.py`
- **ä¸‹è¼‰è…³æœ¬**: `scripts/download_thetis.sh`
- **å¿«é€Ÿé–‹å§‹**: `quickstart.md`
